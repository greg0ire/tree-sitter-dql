================================================================================
COUNT aggregate function
================================================================================

SELECT COUNT(u) FROM User u

--------------------------------------------------------------------------------

(QueryLanguage
  (SelectStatement
    (SelectClause
      (SelectExpression
        (AggregateExpression
          (SimpleArithmeticExpression
            (ArithmeticTerm
              (ArithmeticFactor
                (ArithmeticPrimary
                  (ResultVariable
                    (identifier)))))))))
    (FromClause
      (IdentificationVariableDeclaration
        (RangeVariableDeclaration
          (AbstractSchemaName
            (identifier))
          (AliasIdentificationVariable
            (identifier)))))))

================================================================================
AVG aggregate function
================================================================================

SELECT AVG(u.age) FROM User u

--------------------------------------------------------------------------------

(QueryLanguage
  (SelectStatement
    (SelectClause
      (SelectExpression
        (AggregateExpression
          (SimpleArithmeticExpression
            (ArithmeticTerm
              (ArithmeticFactor
                (ArithmeticPrimary
                  (SingleValuedPathExpression
                    (StateFieldPathExpression
                      (IdentificationVariable
                        (identifier))
                      (StateField
                        (SimpleStateField
                          (FieldIdentificationVariable
                            (identifier)))))))))))))
    (FromClause
      (IdentificationVariableDeclaration
        (RangeVariableDeclaration
          (AbstractSchemaName
            (identifier))
          (AliasIdentificationVariable
            (identifier)))))))

================================================================================
Multiple aggregates with GROUP BY and HAVING
================================================================================

SELECT u.department, COUNT(u), AVG(u.salary) FROM User u 
GROUP BY u.department 
HAVING COUNT(u) > 5

--------------------------------------------------------------------------------

(QueryLanguage
  (SelectStatement
    (SelectClause
      (SelectExpression
        (ScalarExpression
          (StateFieldPathExpression
            (IdentificationVariable
              (identifier))
            (StateField
              (SimpleStateField
                (FieldIdentificationVariable
                  (identifier)))))))
      (SelectExpression
        (AggregateExpression
          (SimpleArithmeticExpression
            (ArithmeticTerm
              (ArithmeticFactor
                (ArithmeticPrimary
                  (ResultVariable
                    (identifier))))))))
      (SelectExpression
        (AggregateExpression
          (SimpleArithmeticExpression
            (ArithmeticTerm
              (ArithmeticFactor
                (ArithmeticPrimary
                  (SingleValuedPathExpression
                    (StateFieldPathExpression
                      (IdentificationVariable
                        (identifier))
                      (StateField
                        (SimpleStateField
                          (FieldIdentificationVariable
                            (identifier)))))))))))))
    (FromClause
      (IdentificationVariableDeclaration
        (RangeVariableDeclaration
          (AbstractSchemaName
            (identifier))
          (AliasIdentificationVariable
            (identifier)))))
    (GroupByClause
      (GroupByItem
        (SingleValuedPathExpression
          (StateFieldPathExpression
            (IdentificationVariable
              (identifier))
            (StateField
              (SimpleStateField
                (FieldIdentificationVariable
                  (identifier))))))))
    (HavingClause
      (ConditionalExpression
        (ConditionalTerm
          (ConditionalFactor
            (ConditionalPrimary
              (SimpleConditionalExpression
                (ComparisonExpression
                  (ArithmeticExpression
                    (SimpleArithmeticExpression
                      (ArithmeticTerm
                        (ArithmeticFactor
                          (ArithmeticPrimary
                            (AggregateExpression
                              (SimpleArithmeticExpression
                                (ArithmeticTerm
                                  (ArithmeticFactor
                                    (ArithmeticPrimary
                                      (ResultVariable
                                        (identifier))))))))))))
                  (ComparisonOperator)
                  (ArithmeticExpression
                    (SimpleArithmeticExpression
                      (ArithmeticTerm
                        (ArithmeticFactor
                          (ArithmeticPrimary
                             (Literal
                               (integer))))))))))))))))
