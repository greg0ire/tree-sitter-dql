================================================================================
COUNT aggregate function
================================================================================

SELECT COUNT(u) FROM User u

--------------------------------------------------------------------------------

(source_file
  (select_statement
    (select_clause
      (select_expression
        (scalar_expression
          (simple_arithmetic_expression
            (arithmetic_term
              (arithmetic_factor
                (arithmetic_primary
                  (aggregate_expression
                    (simple_arithmetic_expression
                      (arithmetic_term
                        (arithmetic_factor
                          (arithmetic_primary
                            (result_variable
                              (identifier))))))))))))))
    (from_clause
      (identification_variable_declaration
        (range_variable_declaration
          (abstract_schema_name
            (identifier))
          (alias_identification_variable
            (identifier)))))))

================================================================================
AVG aggregate function
================================================================================

SELECT AVG(u.age) FROM User u

--------------------------------------------------------------------------------

(source_file
  (select_statement
    (select_clause
      (select_expression
        (scalar_expression
          (simple_arithmetic_expression
            (arithmetic_term
              (arithmetic_factor
                (arithmetic_primary
                  (aggregate_expression
                    (simple_arithmetic_expression
                      (arithmetic_term
                        (arithmetic_factor
                          (arithmetic_primary
                            (single_valued_association_path_expression
                              (identification_variable
                                (identifier))
                              (field_identification_variable
                                (identifier)))))))))))))))
    (from_clause
      (identification_variable_declaration
        (range_variable_declaration
          (abstract_schema_name
            (identifier))
          (alias_identification_variable
            (identifier)))))))

================================================================================
Multiple aggregates with GROUP BY and HAVING
================================================================================

SELECT u.department, COUNT(u), AVG(u.salary) FROM User u 
GROUP BY u.department 
HAVING COUNT(u) > 5

--------------------------------------------------------------------------------

(source_file
  (select_statement
    (select_clause
      (select_expression
        (scalar_expression
          (simple_arithmetic_expression
            (arithmetic_term
              (arithmetic_factor
                (arithmetic_primary
                  (single_valued_association_path_expression
                    (identification_variable
                      (identifier))
                    (field_identification_variable
                      (identifier)))))))))
      (select_expression
        (scalar_expression
          (simple_arithmetic_expression
            (arithmetic_term
              (arithmetic_factor
                (arithmetic_primary
                  (aggregate_expression
                    (simple_arithmetic_expression
                      (arithmetic_term
                        (arithmetic_factor
                          (arithmetic_primary
                            (result_variable
                              (identifier)))))))))))))
      (select_expression
        (scalar_expression
          (simple_arithmetic_expression
            (arithmetic_term
              (arithmetic_factor
                (arithmetic_primary
                  (aggregate_expression
                    (simple_arithmetic_expression
                      (arithmetic_term
                        (arithmetic_factor
                          (arithmetic_primary
                            (single_valued_association_path_expression
                              (identification_variable
                                (identifier))
                              (field_identification_variable
                                (identifier)))))))))))))))
    (from_clause
      (identification_variable_declaration
        (range_variable_declaration
          (abstract_schema_name
            (identifier))
          (alias_identification_variable
            (identifier)))))
    (group_by_clause
      (group_by_item
        (single_valued_association_path_expression
          (identification_variable
            (identifier))
          (field_identification_variable
            (identifier)))))
    (having_clause
      (conditional_expression
        (conditional_term
          (conditional_factor
            (conditional_primary
              (simple_conditional_expression
                (comparison_expression
                  (arithmetic_expression
                    (simple_arithmetic_expression
                      (arithmetic_term
                        (arithmetic_factor
                          (arithmetic_primary
                            (aggregate_expression
                              (simple_arithmetic_expression
                                (arithmetic_term
                                  (arithmetic_factor
                                    (arithmetic_primary
                                      (result_variable
                                        (identifier))))))))))))
                  (comparison_operator)
                  (arithmetic_expression
                    (simple_arithmetic_expression
                      (arithmetic_term
                        (arithmetic_factor
                          (arithmetic_primary
                            (literal
                              (integer_literal))))))))))))))))
